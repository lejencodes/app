"use strict";(self.webpackChunkapp_src=self.webpackChunkapp_src||[]).push([[8923],{17861:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>l,contentTitle:()=>c,default:()=>p,frontMatter:()=>r,metadata:()=>o,toc:()=>i});var s=t(85893),n=t(11151);const r={id:"basic-of-argocd",title:"Basic of ArgoCD",tags:["ci","argocd"]},c=void 0,o={id:"programming/ci/basic-of-argocd",title:"Basic of ArgoCD",description:"Getting started",source:"@site/docs/programming/ci/basic-of-argocd.md",sourceDirName:"programming/ci",slug:"/programming/ci/basic-of-argocd",permalink:"/app/docs/programming/ci/basic-of-argocd",draft:!1,unlisted:!1,tags:[{label:"ci",permalink:"/app/docs/tags/ci"},{label:"argocd",permalink:"/app/docs/tags/argocd"}],version:"current",frontMatter:{id:"basic-of-argocd",title:"Basic of ArgoCD",tags:["ci","argocd"]},sidebar:"docsSidebar",previous:{title:"CI",permalink:"/app/docs/category/ci"},next:{title:"Basics of CircleCI",permalink:"/app/docs/programming/ci/basic-of-circleci"}},l={},i=[{value:"Getting started",id:"getting-started",level:2},{value:"Accessing the Web UI",id:"accessing-the-web-ui",level:2},{value:"Get the Admin Password",id:"get-the-admin-password",level:2},{value:"Reset Password",id:"reset-password",level:2},{value:"Add an Application",id:"add-an-application",level:2},{value:"Delete Everything",id:"delete-everything",level:2}];function d(e){const a={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",...(0,n.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.h2,{id:"getting-started",children:"Getting started"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-shell",children:"minikube start\nminikube dashboard\n"})}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-shell",children:"# To delete all and start fresh\nkubectl delete deployment --all\n"})}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-shell",children:"minikube delete\nminikube start\n"})}),"\n",(0,s.jsx)(a.p,{children:(0,s.jsx)(a.a,{href:"https://github.com/arthurk/argocd-example-install/",children:"ArgoCD Example Install Repository"})}),"\n",(0,s.jsx)(a.h2,{id:"accessing-the-web-ui",children:"Accessing the Web UI"}),"\n",(0,s.jsx)(a.p,{children:"Install ArgoCD using Helm chart:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-shell",children:"helm install argo-cd charts/argo-cd/\n"})}),"\n",(0,s.jsx)(a.p,{children:"The Helm chart doesn't install an Ingress by default. To access the Web UI, you need to port-forward to the\nargocd-server service:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-shell",children:"kubectl port-forward svc/argo-cd-argocd-server 8080:443\n"})}),"\n",(0,s.jsx)(a.h2,{id:"get-the-admin-password",children:"Get the Admin Password"}),"\n",(0,s.jsx)(a.p,{children:"To get the initial admin password, run the following command:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-shell",children:'kubectl get secret argocd-initial-admin-secret -o jsonpath="{.data.password}" | base64 -d\n'})}),"\n",(0,s.jsx)(a.h2,{id:"reset-password",children:"Reset Password"}),"\n",(0,s.jsxs)(a.p,{children:["Use a tool like ",(0,s.jsx)(a.a,{href:"https://www.browserling.com/tools/bcrypt",children:"bcrypt"})," to generate a new password hash and then update the\nArgoCD secret:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-shell",children:'<default> is the namespace\n\nkubectl -n default patch secret argocd-secret -p \'{"stringData": {"admin.password": "$2a$10$xxx","admin.passwordMtime": "\'$(date +%FT%T%Z)\'"}}\'\n'})}),"\n",(0,s.jsx)(a.p,{children:"Add an ArgoCD repository:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-shell",children:"argocd repo add git@bitbucket.org:xxx/abc-autotest.git --ssh-private-key-path ~/.ssh/id_rsa_argo\n\nargocd repo add https://github.com/redhat-developer-demos/openshift-gitops-examples.git\n"})}),"\n",(0,s.jsx)(a.h2,{id:"add-an-application",children:"Add an Application"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-shell",children:'argocd app create guestbook --repo https://github.com/argoproj/argocd-example-apps.git --path guestbook --dest-server https://kubernetes.default.svc --dest-namespace default\n\nargocd app get guestbook\n\nargocd app sync guestbook\n\nkubectl port-forward svc/helm-guestbook 9090:80\n\nkubectl port-forward svc/guestbook-ui 9090:80\n\n# Force patch the revision target\nargocd app patch root --patch \'[{"op": "replace", "path": "/spec/source/targetRevision", "value": "test/bb-pipeline"}]\'\n\n# Apply Helm templates\nhelm template apps/ | kubectl apply -f -\n'})}),"\n",(0,s.jsx)(a.h2,{id:"delete-everything",children:"Delete Everything"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-shell",children:"kubectl delete all --all --all-namespaces\n"})})]})}function p(e={}){const{wrapper:a}={...(0,n.a)(),...e.components};return a?(0,s.jsx)(a,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},11151:(e,a,t)=>{t.d(a,{Z:()=>o,a:()=>c});var s=t(67294);const n={},r=s.createContext(n);function c(e){const a=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function o(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:c(e.components),s.createElement(r.Provider,{value:a},e.children)}}}]);