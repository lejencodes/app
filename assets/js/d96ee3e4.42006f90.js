"use strict";(self.webpackChunkapp_src=self.webpackChunkapp_src||[]).push([[530],{82996:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>t,contentTitle:()=>i,default:()=>h,frontMatter:()=>r,metadata:()=>c,toc:()=>d});var o=a(85893),s=a(11151);const r={id:"basic-docker-command",title:"Basic Docker Command",tags:["docker","command"]},i="Docker",c={id:"cheatsheet/basic-docker-command",title:"Basic Docker Command",description:"Purging All Unused or Dangling Images, Containers, Volumes, and Networks",source:"@site/docs/cheatsheet/basic-docker-command.md",sourceDirName:"cheatsheet",slug:"/cheatsheet/basic-docker-command",permalink:"/app/docs/cheatsheet/basic-docker-command",draft:!1,unlisted:!1,tags:[{label:"docker",permalink:"/app/docs/tags/docker"},{label:"command",permalink:"/app/docs/tags/command"}],version:"current",frontMatter:{id:"basic-docker-command",title:"Basic Docker Command",tags:["docker","command"]},sidebar:"docsSidebar",previous:{title:"Cheatsheet",permalink:"/app/docs/category/cheatsheet"},next:{title:"Basic Git Command",permalink:"/app/docs/cheatsheet/basic-git-command"}},t={},d=[{value:"Purging All Unused or Dangling Images, Containers, Volumes, and Networks",id:"purging-all-unused-or-dangling-images-containers-volumes-and-networks",level:2},{value:"Removing Docker Images",id:"removing-docker-images",level:2},{value:"Remove one or more specific images",id:"remove-one-or-more-specific-images",level:3},{value:"Remove dangling images",id:"remove-dangling-images",level:3},{value:"Removing images according to a pattern",id:"removing-images-according-to-a-pattern",level:3},{value:"Remove all images",id:"remove-all-images",level:3},{value:"Removing Containers",id:"removing-containers",level:2},{value:"Remove one or more specific containers",id:"remove-one-or-more-specific-containers",level:3},{value:"Remove a container upon exiting",id:"remove-a-container-upon-exiting",level:3},{value:"Remove all exited containers",id:"remove-all-exited-containers",level:3},{value:"Remove containers using more than one filter",id:"remove-containers-using-more-than-one-filter",level:3},{value:"Remove containers according to a pattern",id:"remove-containers-according-to-a-pattern",level:3},{value:"Stop and remove all containers",id:"stop-and-remove-all-containers",level:3},{value:"Removing Volumes",id:"removing-volumes",level:2},{value:"Remove one or more specific volumes - Docker 1.9 and later",id:"remove-one-or-more-specific-volumes---docker-19-and-later",level:3},{value:"Remove dangling volumes - Docker 1.9 and later",id:"remove-dangling-volumes---docker-19-and-later",level:3},{value:"Remove a container and its volume",id:"remove-a-container-and-its-volume",level:3}];function l(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,s.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"docker",children:"Docker"}),"\n",(0,o.jsx)(n.h2,{id:"purging-all-unused-or-dangling-images-containers-volumes-and-networks",children:"Purging All Unused or Dangling Images, Containers, Volumes, and Networks"}),"\n",(0,o.jsxs)(n.p,{children:["Docker provides a single command that will clean up any resources \u2014 images, containers, volumes, and networks \u2014 that\nare ",(0,o.jsx)(n.em,{children:"dangling"})," (not tagged or associated with a container):"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker system prune\n"})}),"\n",(0,o.jsxs)(n.p,{children:["To additionally remove any stopped containers and all unused images (not just dangling images), add the ",(0,o.jsx)(n.code,{children:"-a"})," flag to the\ncommand:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker system prune -a\n"})}),"\n",(0,o.jsx)(n.h2,{id:"removing-docker-images",children:"Removing Docker Images"}),"\n",(0,o.jsx)(n.h3,{id:"remove-one-or-more-specific-images",children:"Remove one or more specific images"}),"\n",(0,o.jsxs)(n.p,{children:["Use the ",(0,o.jsx)(n.code,{children:"docker images"})," command with the ",(0,o.jsx)(n.code,{children:"-a"})," flag to locate the ID of the images you want to remove. This will show you\nevery image, including intermediate image layers. When you\u2019ve located the images you want to delete, you can pass their\nID or tag to ",(0,o.jsx)(n.code,{children:"docker rmi"}),":"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"List:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker images -a\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Remove:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker rmi Image Image\n"})}),"\n",(0,o.jsx)(n.h3,{id:"remove-dangling-images",children:"Remove dangling images"}),"\n",(0,o.jsxs)(n.p,{children:["Docker images consist of multiple layers. Dangling images are layers that have no relationship to any tagged images.\nThey no longer serve a purpose and consume disk space. They can be located by adding the filter flag ",(0,o.jsx)(n.code,{children:"-f"})," with a value\nof ",(0,o.jsx)(n.code,{children:"dangling=true"})," to the ",(0,o.jsx)(n.code,{children:"docker images"})," command. When you\u2019re sure you want to delete them, you can use\nthe ",(0,o.jsx)(n.code,{children:"docker image prune"})," command:"]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Note:"})," If you build an image without tagging it, the image will appear on the list of dangling images because it has\nno association with a tagged image. You can avoid this situation\nby ",(0,o.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/build/#/tag-image--t",children:"providing a tag"})," when you build, and you\ncan retroactively tag an image with the ",(0,o.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/tag/",children:(0,o.jsx)(n.code,{children:"docker tag"})}),"\ncommand."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"List:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker images -f dangling=true\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Remove:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker image prune\n"})}),"\n",(0,o.jsx)(n.h3,{id:"removing-images-according-to-a-pattern",children:"Removing images according to a pattern"}),"\n",(0,o.jsxs)(n.p,{children:["You can find all the images that match a pattern using a combination of ",(0,o.jsx)(n.code,{children:"docker images"}),"\nand ",(0,o.jsx)(n.a,{href:"https://www.digitalocean.com/community/tutorials/using-grep-regular-expressions-to-search-for-text-patterns-in-linux",children:(0,o.jsx)(n.code,{children:"grep"})}),"\n. Once you\u2019re satisfied, you can delete them by\nusing ",(0,o.jsx)(n.a,{href:"https://www.digitalocean.com/community/tutorials/how-to-use-the-awk-language-to-manipulate-text-in-linux",children:(0,o.jsx)(n.code,{children:"awk"})}),"\nto pass the IDs to ",(0,o.jsx)(n.code,{children:"docker rmi"}),". Note that these utilities are not supplied by Docker and are not necessarily available\non all systems:"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"List:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'docker images -a |  grep "pattern"\n'})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Remove:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker images -a | grep \"pattern\" | awk '{print $3}' | xargs docker rmi\n"})}),"\n",(0,o.jsx)(n.h3,{id:"remove-all-images",children:"Remove all images"}),"\n",(0,o.jsxs)(n.p,{children:["All the Docker images on a system can be listed by adding ",(0,o.jsx)(n.code,{children:"-a"})," to the ",(0,o.jsx)(n.code,{children:"docker images"})," command. Once you\u2019re sure you want\nto delete them all, you can add the ",(0,o.jsx)(n.code,{children:"-q"})," flag to pass the image ID to ",(0,o.jsx)(n.code,{children:"docker rmi"}),":"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"List:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker images -a\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Remove:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker rmi $(docker images -a -q)\n"})}),"\n",(0,o.jsx)(n.h2,{id:"removing-containers",children:"Removing Containers"}),"\n",(0,o.jsx)(n.h3,{id:"remove-one-or-more-specific-containers",children:"Remove one or more specific containers"}),"\n",(0,o.jsxs)(n.p,{children:["Use the ",(0,o.jsx)(n.code,{children:"docker ps"})," command with the ",(0,o.jsx)(n.code,{children:"-a"})," flag to locate the name or ID of the containers you want to remove:"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"List:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker ps -a\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Remove:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker rm ID_or_Name ID_or_Name\n"})}),"\n",(0,o.jsx)(n.h3,{id:"remove-a-container-upon-exiting",children:"Remove a container upon exiting"}),"\n",(0,o.jsxs)(n.p,{children:["If you know when you\u2019re creating a container that you won\u2019t want to keep it around once you\u2019re done, you can\nrun ",(0,o.jsx)(n.code,{children:"docker run --rm"})," to automatically delete it when it exits:"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Run and Remove:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker run --rm image_name\n"})}),"\n",(0,o.jsx)(n.h3,{id:"remove-all-exited-containers",children:"Remove all exited containers"}),"\n",(0,o.jsxs)(n.p,{children:["You can locate containers using ",(0,o.jsx)(n.code,{children:"docker ps -a"})," and filter them by their status: ",(0,o.jsx)(n.code,{children:"created"}),", ",(0,o.jsx)(n.code,{children:"restarting"}),", ",(0,o.jsx)(n.code,{children:"running"}),"\n, ",(0,o.jsx)(n.code,{children:"paused"}),", or ",(0,o.jsx)(n.code,{children:"exited"}),". To review the list of ",(0,o.jsx)(n.code,{children:"exited"})," containers, use the ",(0,o.jsx)(n.code,{children:"-f"})," flag to filter based on status. When\nyou\u2019ve verified you want to remove those containers, use ",(0,o.jsx)(n.code,{children:"-q"})," to pass the IDs to the ",(0,o.jsx)(n.code,{children:"docker rm"})," command:"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"List:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker ps -a -f status=exited\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Remove:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker rm $(docker ps -a -f status=exited -q)\n"})}),"\n",(0,o.jsx)(n.h3,{id:"remove-containers-using-more-than-one-filter",children:"Remove containers using more than one filter"}),"\n",(0,o.jsxs)(n.p,{children:["Docker filters can be combined by repeating the filter flag with an additional value. This results in a list of\ncontainers that meet either condition. For example, if you want to delete all containers marked as either ",(0,o.jsx)(n.code,{children:"created"})," (a\nstate which can result when you run a container with an invalid command) or ",(0,o.jsx)(n.code,{children:"exited"}),", you can use two filters:"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"List:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker ps -a -f status=exited -f status=created\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Remove:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker rm $(docker ps -a -f status=exited -f status=created -q)\n"})}),"\n",(0,o.jsx)(n.h3,{id:"remove-containers-according-to-a-pattern",children:"Remove containers according to a pattern"}),"\n",(0,o.jsxs)(n.p,{children:["You can find all the containers that match a pattern using a combination of ",(0,o.jsx)(n.code,{children:"docker ps"}),"\nand ",(0,o.jsx)(n.a,{href:"https://www.digitalocean.com/community/tutorials/using-grep-regular-expressions-to-search-for-text-patterns-in-linux",children:(0,o.jsx)(n.code,{children:"grep"})}),"\n. When you\u2019re satisfied that you have the list you want to delete, you can\nuse ",(0,o.jsx)(n.a,{href:"https://www.digitalocean.com/community/tutorials/how-to-use-the-awk-language-to-manipulate-text-in-linux",children:(0,o.jsx)(n.code,{children:"awk"})}),"\nand ",(0,o.jsx)(n.code,{children:"xargs"})," to supply the ID to ",(0,o.jsx)(n.code,{children:"docker rm"}),". Note that these utilities are not supplied by Docker and are not\nnecessarily available on all systems:"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"List:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'docker ps -a |  grep "pattern\u201d\n'})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Remove:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker ps -a | grep \"pattern\" | awk '{print $1}' | xargs docker rm\n"})}),"\n",(0,o.jsx)(n.h3,{id:"stop-and-remove-all-containers",children:"Stop and remove all containers"}),"\n",(0,o.jsxs)(n.p,{children:["You can review the containers on your system with ",(0,o.jsx)(n.code,{children:"docker ps"}),". Adding the ",(0,o.jsx)(n.code,{children:"-a"})," flag will show all containers. When\nyou\u2019re sure you want to delete them, you can add the ",(0,o.jsx)(n.code,{children:"-q"})," flag to supply the IDs to the ",(0,o.jsx)(n.code,{children:"docker stop"})," and ",(0,o.jsx)(n.code,{children:"docker rm"}),"\ncommands:"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"List:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker ps -a\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Remove:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker stop $(docker ps -a -q)\ndocker rm $(docker ps -a -q)\n"})}),"\n",(0,o.jsx)(n.h2,{id:"removing-volumes",children:"Removing Volumes"}),"\n",(0,o.jsx)(n.h3,{id:"remove-one-or-more-specific-volumes---docker-19-and-later",children:"Remove one or more specific volumes - Docker 1.9 and later"}),"\n",(0,o.jsxs)(n.p,{children:["Use the ",(0,o.jsx)(n.code,{children:"docker volume ls"})," command to locate the volume name or names you wish to delete. Then you can remove one or\nmore volumes with the ",(0,o.jsx)(n.code,{children:"docker volume rm"})," command:"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"List:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker volume ls\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Remove:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker volume rm volume_name volume_name\n"})}),"\n",(0,o.jsx)(n.h3,{id:"remove-dangling-volumes---docker-19-and-later",children:"Remove dangling volumes - Docker 1.9 and later"}),"\n",(0,o.jsxs)(n.p,{children:["Since the point of volumes is to exist independent from containers, when a container is removed, a volume is not\nautomatically removed at the same time. When a volume exists and is no longer connected to any containers, it\u2019s called\na ",(0,o.jsx)(n.em,{children:"dangling volume"}),". To locate them to confirm you want to remove them, you can use the ",(0,o.jsx)(n.code,{children:"docker volume ls"})," command with\na filter to limit the results to dangling volumes. When you\u2019re satisfied with the list, you can remove them all\nwith ",(0,o.jsx)(n.code,{children:"docker volume prune"}),":"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"List:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker volume ls -f dangling=true\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Remove:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker volume prune\n"})}),"\n",(0,o.jsx)(n.h3,{id:"remove-a-container-and-its-volume",children:"Remove a container and its volume"}),"\n",(0,o.jsxs)(n.p,{children:["If you created an unnamed volume, it can be deleted at the same time as the container with the ",(0,o.jsx)(n.code,{children:"-v"})," flag. Note that this\nonly works with ",(0,o.jsx)(n.em,{children:"unnamed"})," volumes. When the container is successfully removed, its ID is displayed. Note that no\nreference is made to the removal of the volume. If it is unnamed, it is silently removed from the system. If it is\nnamed, it silently stays present."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Remove:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker rm -v container_name\n"})})]})}function h(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},11151:(e,n,a)=>{a.d(n,{Z:()=>c,a:()=>i});var o=a(67294);const s={},r=o.createContext(s);function i(e){const n=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);